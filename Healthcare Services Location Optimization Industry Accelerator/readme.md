# Healthcare Services Location Optimization

Download the project `health-care-services-location-optimization-industry-accelerator.tar.gz` from the Releases `CPDv3.0.x` and import it into Cloud Pak for Data v3.0.x. You can also follow the instructions from the [Community Page](https://community.ibm.com/community/user/cloudpakfordata/viewdocument/healthcare-location-services-optimi) to download and import the project.


## Introduction
Healthcare Services Location Optimization accelerator includes a structured glossary of more than 50 business terms and set of sample data science artefacts. The glossary provides the information architecture that you need to analyse how far people would travel for medical care in Texas, USA. Data scientists can use the sample notebook and dashboard to accelerate data preparation and data visualization and analysis. The accelerator comes packaged with synthetic data. The notebook also includes code that allows the user to download and use real data.

- [Instructions](#instructions)
- [Sample data assets](#data-assets)
- [Notebooks](#notebooks)
- [R Shiny dashboard](#dashboard)
- [Sample business glossary](#glossary)


<a id="instructions"></a>
## Instructions
Follow these steps to implement the industry accelerator:
1. Navigate to the **Assets** tab and scroll to the **Notebooks** section.

2. Edit the **data-preparation** notebook by clicking the edit icon that looks like a tiny pencil next to the notebook name. Follow the instructions in the notebook to step through the execution.

3. Edit and run the **app-deployment** notebook. This notebook prepares the data, builds ML models, and deploys the model. It also deploys  the r-shiny dashboard and generates a URL to launch the r-shiny dashboard.

4. Launch the r-shiny dashboard from one of the following ways.
    - Open the URL generated by deploying r-shiny dashboard in **2-app-deployment** notebook. 
    - Navigate to **Deployments -> Spaces -> Healthcare Services Location Optimization Space -> Deployments -> Healthcare-Services-Location-Optimization-Shiny-App** to find the URL of deployed r-shiny dashboard and open it in a new tab.
    - Run the dashboard from RStudio console by completing these steps: <br>
     i. Download the `healthcare_services_location_optimization-dashboard.zip` file from the Data assets section of the **Assets** page. If you don't see the file, click **View All** to display the full list of assets.<br>
     ii. Click **Launch IDE > RStudio** on the menu bar. <br>
     iii. In the **Files** pane, select the **Upload** toolbar button and upload the `healthcare_services_location_optimization-dashboard.zip` file into RStudio.<br>
     iv. Select the `app.R` file, and click the **Run App** toolbar button to launch the dashboard. If you see a warning message that certain packages are not installed, you can ignore it because the packages will be installed first time you run the app. <br>

5. Optional. To connect the data assets used in this accelerator to the business terms in Watson Knowledge Catalog, you can edit and run the **0-map-business-terms-to-data-headers** notebook. Enter the authentication details required in the first few cells. 

 <a id="data-assets"></a>
## Sample data assets
The accelerator is provided with synthetic data that you can use to get up & running quickly. You can replace this with your own data or other data from an external source, some examples are provided below. The synthetic data was generated using Synthea - a Synthetic Patient Population Simulator developed by the Mitre Corporation, available at https://github.com/synthetichealth/synthea

1. Patients geographical information with latitude, longitude and zip

  Synthetic Data Source: synthetic patients zip location data.csv
  Real Data Source: http://www2.census.gov/geo/docs/maps-data/data/gazetteer/2016_Gazetteer/2016_Gaz_zcta_national.zip

2. Diagnosis data in different quarters of the year.

  Synthetic Data Source: synthetic diagnosis data.csv
  Real Data Source: https://www.dshs.texas.gov. License Agreement: https://www.dshs.texas.gov/THCIC/Hospitals/Download.shtm
3. Hospital names with longitude and latitude

  Synthetic Data Source: synthetic hospital details.csv
  Real Data Source: https://data.medicare.gov/api/views/xubh-q36u/rows.csv?accessType=DOWNLOAD&sorting=true
  The idea is to generate a dataset which combines above 3 datasets. The final dataset will contain details on the following.

        1. Patients health information including age, illness severity, zip code etc.
        2. Information about the hospital, such as hospital id, name, coordinates of the hospital etc.
        3. Nearest hospital to patient, admitted hospital and the distance travelled to reach the hospital, charges per day.

<a id="notebooks"></a>
## Notebooks

Follow the instructions in the notebooks to step through the execution.

**data-preparation**: It includes steps to download the data sets or alternatively use the synthetic data, clean them and carry out sequence of joins to return the final data set with above information. <br>
**app-deployment**: It includes steps to create a deployment space, Store and deploy R Shiny app; generate url to view the app.

### Jobs
Navigate to **Jobs** tab to execute following jobs. <br>
**1-data-preparation-notebook-job**: Runs the `data-preparation` notebook end to end. <br>
**2-app-deployment-notebook-job**: Runs the `app-deployment` notebook end to end.

<a id="dashboard"></a>
## R Shiny dashboard
**Dashboard View** : Shows top hospitals which patients visited for the particular diagnosis and their competitors along with some diagnosis information such as age of patients.
**Hospital View** : Targets individual hospitals, maps to indicate the distance travelled by the patients, type of the insurance patients use in different hospitals.

Home page of the r-shiny dashboard would look like below
![alt text](https://public.dhe.ibm.com/software/data/sw-library/cognos/mobile/C11/catalog/images/cp4d/Healthcare_Location_Optimization2.PNG)

<a id="glossary"></a>
## Business glossary for use with Watson Knowledge Catalog
Optionally, you can import the glossary of business terms into Watson Knowledge Catalog to get started on data governance using the below files available in the project tar file. <br>
The `healthcare-services-location-optimization-glossary-categories.csv` file defines the main and sub categories for the business terms. <br>
The `healthcare-services-location-optimization-glossary-terms.csv` file defines the business terms, category of the business terms and their Related Terms/Part of Terms, if applicable. <br>

Once the glossary is imported into Watson Knowledge Catalog, Navigate to **Governance > Categories > Industry Accelerator > Healthcare Services Location Optimization** to explore the glossary contents. 

## Terms and Conditions
This project contains Sample Materials, provided under license. <br>
Licensed Materials - Property of IBM. <br>
Â© Copyright IBM Corp. 2019, 2021. All Rights Reserved. <br>
US Government Users Restricted Rights - Use, duplication or disclosure restricted by GSA ADP Schedule Contract with IBM Corp.<br><br/>
